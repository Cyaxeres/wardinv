extends layouts/main
include mixins/sidebar
include mixins/alerts

append head
  title Your Cart - Ward

block content
  .container-fluid
    .row
      +sidebar

      .container-fluid.content_section.col-10
        +alerts
        .row.product_content
          .col-md-1
          .col-md-10
            .header-section.d-flex.justify-content-between.mb-4.align-items-center.ml-0
              h1.display-4 
                span.mr-3.color-primary 
                  i(class="icon ion-md-cart")
                | Your Cart
            hr
            if products && products.length > 0
                  ul.mt-5.list-group
                  each product, index in products
                    li.list-group-item.d-flex.justify-content-between.align-items-center.clearfix
                      .container-fluid
                        h5.mb-1 #{product.item.name}
                        h6.text-success.mb-0.mr-3
                          span #{displayPrices[index]}
                      form.col-md-2(method="POST", action='/cart')
                        .input-group.input-group-sm
                          input(type="hidden" name="product_id" value=`${product.item._id}`)
                          input.form-control.qnty(type='number', value=`${product.qty}`, aria-label="New quantity", max=`${product.item.quantity}`, min=1, name='qty' required)
                          .input-group-append
                            button.btn.btnBlue.btn-update(type='submit', href=`/update-quantity/${product.item._id}`) Update
                      a.h5.btn-red(href=`/cart/delete/${product.item._id}`, title="Remove item") 
                        i(class='icon ion-md-close-circle')
                  hr
                  .float-right
                    h5.text-right Total #[small (#{totalQty} items)] 
                    h1.text-right #[span.text-success #{totalPrice}]
                    form.form-inline(method="POST", action='/cart/checkout')
                      input.form-control.mr-2(type="text", name="patient",placeholder="Patient name", required)
                      button.btn.btnPurple.float-right(type='submit') Order Items


            else
              h2.mt-3 No items in cart!
          .col-md-1
